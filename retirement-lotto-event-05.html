<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>BNK 퇴직연금 로또볼 이벤트 – 미니멀 풀버전</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bnk-red: #D7191F;
    --bnk-dark-red: #8B0304;
    --bnk-silver: #E0E0E0;
    --border-light: #E8E8E8;
    --bg-page: #FAFAFA;
    --text-main: #222222;
    --text-sub: #555555;
}

/* Reset */
* {
    box-sizing: border-box;
}
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    scroll-behavior: smooth;
}

/* Scroll snap */
body {
    font-family: 'Pretendard','Noto Sans KR',sans-serif;
    color: var(--text-main);
    background: var(--bg-page);
    scroll-snap-type: y mandatory;
    overflow-y: auto;
}

/* Global background video */
.global-bg-video {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -3;
}
.global-bg-dim {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    z-index: -2;
}

/* Snap section base */
.snap-section {
    min-height: 100vh;
    scroll-snap-align: start;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 40px 20px;
}
.section-inner {
    width: 100%;
    max-width: 1080px;
}

/* Fade-in animation */
.fade-item {
    opacity: 0;
    transform: translateY(30px);
    transition: opacity 0.7s ease, transform 0.7s ease;
}
.fade-item.visible {
    opacity: 1;
    transform: translateY(0);
}

/* Pure white minimal cards */
.card {
    background: #FFFFFF;
    border-radius: 20px;
    border: 1px solid var(--border-light);
    padding: 32px 28px;
background: rgba(255, 255, 255, 0.6);

}

/* Sticky CTA */
.sticky-cta {
    position: fixed;
    left: 50%;
    transform: translateX(-50%) translateY(12px);
    bottom: 16px;
    background: var(--bnk-red);
    color: #fff;
    border-radius: 999px;
    padding: 9px 20px;
    border: none;
    font-size: 16px;
    font-weight: 600;
    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
    cursor: pointer;
    opacity: 0;
    pointer-events: none;
    transition:
        opacity 0.25s ease,
        transform 0.25s ease,
        box-shadow 0.25s ease,
        padding 0.25s ease,
        bottom 0.25s ease,
        font-size 0.25s ease;
    z-index: 10;
}
.sticky-cta.show {
    opacity: 1;
    pointer-events: auto;
}
.sticky-cta.compact {
    padding: 8px 18px;
    font-size: 16px;
    bottom: 12px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.08);
}
.sticky-cta.focused {
    padding: 13px 28px;
    font-size: 15px;
    bottom: 24px;
    box-shadow: 0 4px 14px rgba(215,25,31,0.25);
    transform: translateX(-50%) translateY(0);
}
.sticky-cta.faded {
    opacity: 0.7;
}

/* Buttons */
.btn-primary {
    background: var(--bnk-red);
    color: #fff;
    padding: 11px 24px;
    border-radius: 12px;
    border: none;
    font-size: 30px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
.btn-secondary {
    background: #FFFFFF;
    color: var(--text-sub);
    padding: 9px 20px;
    border-radius: 999px;
    border: 1px solid var(--border-light);
    font-size: 30px;
    cursor: pointer;
}

/* ---------- Section 1: Hero ---------- */
.hero-card {
    text-align: center;
}
.hero-title {
    font-size: 50px;
    font-weight: 800;
    margin-bottom: 30px;
}
.hero-sub {
    font-size: 30px;
    color: var(--text-sub);
    margin : 30px;
}
.hero-cta-row {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}

/* ---------- Section 2: 이벤트 개요 ---------- */
.section-title {
    font-size: 40px;
    font-weight: 700;
    margin-bottom: 12px;
}
.section-sub {
    font-size: 20px;
    color: var(--text-sub);
    margin-bottom: 18px;
}
.bullet-list {
    list-style: none;
    padding: 0;
    margin: 0;
    font-size: 20px;
    color: var(--text-main);
    line-height: 1.8;
}
.bullet-list li::before {
    content: "• ";
    color: var(--bnk-red);
}

/* ---------- Section 3: 로또볼 적립 ---------- */
.grid-2col {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
    gap: 24px;
}
@media (max-width: 768px) {
    .grid-2col {
        grid-template-columns: 1fr;
    }
}
.info-pill {
    display: inline-block;
    padding: 6px 10px;
    border-radius: 999px;
    font-size: 20px;
    border: 1px solid var(--border-light);
    color: var(--text-sub);
    margin-bottom: 8px;
}

/* ---------- Section 4: 참여 단계 ---------- */
.steps-row {
    display: grid;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    gap: 18px;
}
@media (max-width: 900px) {
    .steps-row {
        grid-template-columns: 1fr;
    }
}
.step-card {
    border-radius: 16px;
    border: 1px solid var(--border-light);
    padding: 16px 14px;
    background: #FFFFFF;
}
.step-label {
    font-size: 20px;
    color: var(--bnk-red);
    font-weight: 600;
    margin-bottom: 6px;
}
.step-title {
    font-size: 20px;
    font-weight: 600;
    margin-bottom: 6px;
}
.step-desc {
    font-size: 20px;
    color: var(--text-sub);
}

/* ---------- Section 5: 번호 선택 ---------- */
.number-grid {
    display: grid;
    grid-template-columns: repeat(9, minmax(0, 1fr));
    gap: 6px;
    margin-top: 18px;
}
.number-btn {
    background: #FFFFFF;
    border-radius: 999px;
    border: 1px solid var(--border-light);
    padding: 10px 0;
    font-size: 30px;
    text-align: center;
    cursor: pointer;
    color: var(--text-main);
}
.number-btn.selected {
    border-color: var(--bnk-red);
    color: var(--bnk-dark-red);
    background: #FDECEC;
}
.select-toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 18px;
    gap: 10px;
    flex-wrap: wrap;
}
.select-toolbar-left {
    display: flex;
    gap: 8px;
}
.selected-text {
    font-size: 20px;
    color: var(--text-sub);
}

/* ---------- Section 6: 추첨 & 결과 ---------- */
.lotto-layout {
    display: grid;
    grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
    gap: 26px;
}
@media (max-width: 768px) {
    .lotto-layout {
        grid-template-columns: 1fr;
    }
}
.lotto-card {
    border-radius: 22px;
    border: 1px solid var(--border-light);
    background: #FFFFFF;
    padding: 22px 20px 24px;
}
.lotto-row {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 16px;
    margin: 18px 0 14px;
}
.lotto-ball {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: #FFFFFF;
    border: 1px solid var(--bnk-silver);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    font-weight: 700;
    color: var(--bnk-dark-red);
    box-shadow:
        0 1px 2px rgba(0,0,0,0.04),
        inset 0 1px 1px rgba(255,255,255,0.9);
}

/* 롤 애니메이션 */
@keyframes rollUp {
    0% { transform: translateY(10px); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
}
.lotto-ball.roll {
    animation: rollUp 0.1s ease-out;
}

/* 결과 pills */
.pill-row {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}
.pill {
    padding: 4px 10px;
    border-radius: 999px;
    font-size: 12px;
    border: 1px solid var(--border-light);
    background: #FFFFFF;
    color: var(--text-main);
}
.pill.mine {
    background: #FFF7F7;
    border-color: #F3C4C4;
}
.pill.win {
    background: #F5F5F5;
}
.pill.match {
    background: #EBFAEB;
    border-color: #B5E3B5;
    color: #126312;
}

/* 메시지 */
.msg {
    margin-top: 8px;
    text-align: center;
    font-size: 14px;
    color: var(--text-sub);
    min-height: 20px;
}

/* Modal */
.modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    display: none;
    z-index: 100;
}
.modal {
    position: fixed;
    inset: 0;
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 101;
}
.modal-card {
    background: #FFFFFF;
    padding: 24px;
    border-radius: 18px;
    width: 90%;
    max-width: 380px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    text-align: center;
}
.modal-card h3 {
    font-size: 20px;
    margin-bottom: 8px;
    color: var(--bnk-dark-red);
}
.modal-desc {
    font-size: 13px;
    color: var(--text-sub);
    margin-bottom: 10px;
}
.winning-chip {
    min-width: 30px;
    height: 30px;
    border-radius: 999px;
    background: #FFE7E7;
    border: 1px solid var(--bnk-red);
    color: var(--bnk-dark-red);
    display: inline-flex;
    justify-content: center;
    align-items: center;
    font-weight: 700;
    font-size: 14px;
    margin: 0 4px;
}
.close-btn {
    margin-top: 16px;
    padding: 9px 18px;
    background: var(--bnk-red);
    border-radius: 8px;
    color: #FFFFFF;
    border: none;
    cursor: pointer;
}
@media (max-width: 600px) {
    .hero-title { font-size: 40px; }
    .hero-sub { font-size: 20px; }
}
</style>
</head>
<body>

<!-- Fullscreen Background Video -->
<video class="global-bg-video" autoplay muted loop playsinline>
    <source src="bg.mp4" type="video/mp4">
</video>
<div class="global-bg-dim"></div>

<!-- Sticky CTA -->
<button id="stickyCta" class="sticky-cta">오늘의 로또 굴리기</button>

<!-- Section 1: Hero -->
<section id="sec1-hero" class="snap-section">
    <div class="section-inner">
        <div class="card hero-card fade-item">
            <div class="hero-title">퇴직연금 로또볼 이벤트</div>
            <div class="hero-sub">
                조회·진단·설정·신청만 해도 로또볼이 쌓입니다.<br>
                BNK 부산은행 퇴직연금 고객을 위한 연말 웹 이벤트입니다.
            </div>
            <div class="hero-cta-row">
                <button id="heroCta" class="btn-primary">이벤트 둘러보기</button>
                <button id="heroToPick" class="btn-secondary">바로 번호 선택하기</button>
            </div>
        </div>
    </div>
</section>

<!-- Section 2: 이벤트 개요 -->
<section id="sec2-overview" class="snap-section">
    <div class="section-inner">
        <div class="card fade-item">
            <div class="section-title">이벤트 개요</div>
            <div class="section-sub">
                퇴직연금을 한 번만 점검해도, 오늘의 행운 번호를 굴릴 수 있는 로또볼이 지급됩니다.
            </div>
            <ul class="bullet-list">
                <li>퇴직연금 <strong>조회·진단·설정·신청</strong> 시 로또볼 지급</li>
                <li>모은 로또볼로 매일 <strong>오늘의 행운 번호</strong> 도전</li>
                <li>실제 로또처럼 6개 번호를 선택하고, 추첨 번호와 일치 개수를 확인</li>
                <li>일치 개수에 따라 <strong>실물 경품</strong> 또는 추가 혜택 제공 가능</li>
            </ul>
        </div>
    </div>
</section>

<!-- Section 3: 로또볼 적립 안내 -->
<section id="sec3-earn" class="snap-section">
    <div class="section-inner">
        <div class="card fade-item">
            <div class="section-title">로또볼 적립 방법</div>
            <div class="grid-2col">
                <div>
                    <div class="section-sub">
                        실제 서비스에서는 연금 행동에 따라 로또볼이 자동 적립됩니다.
                    </div>
                    <ul class="bullet-list">
                        <li>퇴직연금 잔액 <strong>조회</strong> 시 로또볼 1개</li>
                        <li>연금 포트폴리오 <strong>진단</strong> 완료 시 로또볼 2개</li>
                        <li>상품 <strong>변경·추가 납입</strong> 시 로또볼 3개</li>
                        <li>자동이체 <strong>신규 설정</strong> 시 추가 로또볼 지급</li>
                    </ul>
                </div>
                <div>
                    <div class="info-pill">데모 화면 – 실제 적립 정책은 약관 기준</div>
                    <p style="font-size:13px; color:var(--text-sub);">
                        이 화면은 기획/디자인용 데모입니다.<br>
                        실제 적립 로직·지급 기준은 BNK 퇴직연금 상품 및 이벤트 약관에 따라 달라질 수 있습니다.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section 4: 참여 단계 안내 -->
<section id="sec4-steps" class="snap-section">
    <div class="section-inner">
        <div class="card fade-item">
            <div class="section-title">참여 방법</div>
            <div class="section-sub">
                실제 로또 구조와 동일하게, 1~45 중 6개 번호를 선택한 후 추첨 번호와 비교합니다.
            </div>
            <div class="steps-row">
                <div class="step-card">
                    <div class="step-label">STEP 1</div>
                    <div class="step-title">로또볼 모으기</div>
                    <div class="step-desc">
                        퇴직연금 조회·진단·설정·신청을 통해 로또볼을 적립합니다.
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-label">STEP 2</div>
                    <div class="step-title">번호 6개 선택</div>
                    <div class="step-desc">
                        1~45 중 원하는 번호 6개를 직접 선택하거나, 랜덤 선택 기능을 사용할 수 있습니다.
                    </div>
                </div>
                <div class="step-card">
                    <div class="step-label">STEP 3</div>
                    <div class="step-title">추첨 & 결과 확인</div>
                    <div class="step-desc">
                        시스템이 난수 6개를 추첨하고, 내가 선택한 번호와 몇 개가 일치하는지 UI로 보여줍니다.
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section 5: 번호 선택 -->
<section id="sec5-pick" class="snap-section">
    <div class="section-inner">
        <div class="card fade-item">
            <div class="section-title">1단계 – 오늘 사용할 번호 6개 선택</div>
            <div class="section-sub">
                1부터 45까지 숫자 중 <strong>정확히 6개</strong>를 선택해주세요.
            </div>

            <div class="number-grid" id="numberGrid"></div>

            <div class="select-toolbar">
                <div class="select-toolbar-left">
                    <button type="button" id="btnRandomPick" class="btn-secondary">랜덤 6개</button>
                    <button type="button" id="btnClearPick" class="btn-secondary">초기화</button>
                </div>
                <div class="selected-text">
                    선택한 번호: <span id="selectedNumbersText">없음</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Section 6: 추첨 & 결과 -->
<section id="sec6-draw" class="snap-section">
    <div class="section-inner">
        <div class="card fade-item">
            <div class="section-title">2단계 – 추첨 & 결과 확인</div>
            <div class="lotto-layout">
                <!-- 설명 -->
                <div>
                    <p class="section-sub" style="margin-bottom:10px;">
                        아래 버튼을 눌러 실제 로또처럼 난수 6개를 추첨합니다.<br>
                        내가 선택한 번호와 몇 개가 일치하는지 바로 확인할 수 있습니다.
                    </p>
                    <p style="font-size:13px; color:var(--text-sub);">
                        * 이 화면은 데모 UI이며, 실제 당첨 기준·경품 정책은 별도의 이벤트 약관을 따릅니다.
                    </p>
                    <div style="margin-top:18px; font-size:14px;">
                        <strong>결과 요약</strong><br>
                        <span id="summaryText" style="color:var(--text-sub);">
                            아직 추첨 전입니다.
                        </span>
                    </div>
                </div>

                <!-- 로또 UI -->
                <div class="lotto-card">
                    <div class="lotto-row" id="lottoRow">
                        <!-- 6개 로또볼 -->
                        <div class="lotto-ball" data-slot="0">0</div>
                        <div class="lotto-ball" data-slot="1">0</div>
                        <div class="lotto-ball" data-slot="2">0</div>
                        <div class="lotto-ball" data-slot="3">0</div>
                        <div class="lotto-ball" data-slot="4">0</div>
                        <div class="lotto-ball" data-slot="5">0</div>
                    </div>

                    <div style="text-align:center;">
                        <button id="rollButton" class="btn-primary">오늘의 로또 굴리기</button>
                    </div>

                    <div id="msg" class="msg"></div>

                    <div style="margin-top:14px; font-size:13px;">
                        <div style="margin-bottom:4px; font-weight:600;">내 번호</div>
                        <div id="myNums" class="pill-row"></div>

                        <div style="margin:10px 0 4px; font-weight:600;">추첨 번호</div>
                        <div id="winNumsBox" class="pill-row"></div>

                        <div style="margin:10px 0 4px; font-weight:600;">일치한 번호</div>
                        <div id="matchNums" class="pill-row"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Modal (선택: 많이 맞았을 때 강조용) -->
<div id="modalBackdrop" class="modal-backdrop"></div>
<div id="winModal" class="modal">
    <div class="modal-card">
        <h3>축하합니다!</h3>
        <div class="modal-desc">
            선택한 번호와 추첨 번호가 <span id="modalMatchCount"></span>개 일치했습니다.
        </div>
        <div id="modalWinNums"></div>
        <button class="close-btn" onclick="hideWinModal()">닫기</button>
    </div>
</div>

<script>
/* -------- Fade-in -------- */
const fadeItems = document.querySelectorAll('.fade-item');
const fadeObserver = new IntersectionObserver((entries) => {
    entries.forEach(e => {
        if (e.isIntersecting) {
            e.target.classList.add('visible');
        }
    });
}, { threshold: 0.3 });
fadeItems.forEach(el => fadeObserver.observe(el));

/* -------- Sticky CTA + Scroll Trigger -------- */
const stickyCta = document.getElementById('stickyCta');
const secHero = document.getElementById('sec1-hero');
const secOverview = document.getElementById('sec2-overview');
const secEarn = document.getElementById('sec3-earn');
const secSteps = document.getElementById('sec4-steps');
const secPick = document.getElementById('sec5-pick');
const secDraw = document.getElementById('sec6-draw');

function setStickyState(state) {
    stickyCta.classList.add('show');
    stickyCta.classList.remove('compact','focused','faded');

    if (state === 'hero') {
        stickyCta.classList.add('compact','faded');
    } else if (state === 'mid') {
        stickyCta.classList.add('compact');
    } else if (state === 'draw') {
        stickyCta.classList.add('focused');
    }
}

const secObserver = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        const id = entry.target.id;
        if (id === 'sec1-hero') setStickyState('hero');
        else if (id === 'sec6-draw') setStickyState('draw');
        else setStickyState('mid');
    });
}, { threshold: 0.6 });

[secHero, secOverview, secEarn, secSteps, secPick, secDraw].forEach(s => secObserver.observe(s));

stickyCta.addEventListener('click', () => {
    secDraw.scrollIntoView({ behavior: 'smooth' });
});

/* Hero CTAs */
document.getElementById('heroCta').addEventListener('click', () => {
    secOverview.scrollIntoView({ behavior: 'smooth' });
});
document.getElementById('heroToPick').addEventListener('click', () => {
    secPick.scrollIntoView({ behavior: 'smooth' });
});

/* -------- 번호 선택 로직 (1~45 중 6개) -------- */
const MAX_NUM = 45;
const PICK = 6;
let selected = [];

const numberGrid = document.getElementById('numberGrid');
const selectedNumbersText = document.getElementById('selectedNumbersText');
const myNumsBox = document.getElementById('myNums');

for (let i = 1; i <= MAX_NUM; i++) {
    const btn = document.createElement('button');
    btn.type = 'button';
    btn.className = 'number-btn';
    btn.textContent = i;
    btn.addEventListener('click', () => toggleNumber(i, btn));
    numberGrid.appendChild(btn);
}

function renderSelected() {
    if (!selected.length) {
        selectedNumbersText.textContent = '없음';
    } else {
        const sorted = [...selected].sort((a,b)=>a-b);
        selectedNumbersText.textContent = sorted.join(', ');
    }

    // 내 번호 pill 영역도 업데이트 (Section 6)
    myNumsBox.innerHTML = '';
    if (selected.length) {
        [...selected].sort((a,b)=>a-b).forEach(n => {
            const span = document.createElement('span');
            span.className = 'pill mine';
            span.textContent = n;
            myNumsBox.appendChild(span);
        });
    }
}

function toggleNumber(n, btn) {
    const idx = selected.indexOf(n);
    if (idx === -1) {
        if (selected.length >= PICK) {
            alert('번호는 6개까지만 선택할 수 있습니다.');
            return;
        }
        selected.push(n);
        btn.classList.add('selected');
    } else {
        selected.splice(idx, 1);
        btn.classList.remove('selected');
    }
    renderSelected();
}

function clearSelection() {
    selected = [];
    Array.from(numberGrid.children).forEach(btn => btn.classList.remove('selected'));
    renderSelected();
}

function randomPick() {
    clearSelection();
    const set = new Set();
    while (set.size < PICK) {
        set.add(Math.floor(Math.random() * MAX_NUM) + 1);
    }
    selected = [...set];
    Array.from(numberGrid.children).forEach(btn => {
        const v = Number(btn.textContent);
        if (selected.includes(v)) btn.classList.add('selected');
    });
    renderSelected();
}

document.getElementById('btnRandomPick').addEventListener('click', randomPick);
document.getElementById('btnClearPick').addEventListener('click', clearSelection);

/* -------- 로또 추첨 로직 (난수 6개 + 비교) -------- */
const balls = document.querySelectorAll('.lotto-ball');
const rollButton = document.getElementById('rollButton');
const msg = document.getElementById('msg');
const winNumsBox = document.getElementById('winNumsBox');
const matchNumsBox = document.getElementById('matchNums');
const summaryText = document.getElementById('summaryText');

const modalBackdrop = document.getElementById('modalBackdrop');
const winModal = document.getElementById('winModal');
const modalMatchCount = document.getElementById('modalMatchCount');
const modalWinNums = document.getElementById('modalWinNums');

let isRolling = false;

function random6() {
    const s = new Set();
    while (s.size < 6) {
        s.add(Math.floor(Math.random() * MAX_NUM) + 1);
    }
    return [...s].sort((a,b)=>a-b);
}

function hideWinModal() {
    modalBackdrop.style.display = 'none';
    winModal.style.display = 'none';
}

function showWinModal(matchCount, winNums) {
    modalMatchCount.textContent = matchCount;
    modalWinNums.innerHTML = '';
    winNums.forEach(n => {
        const chip = document.createElement('span');
        chip.className = 'winning-chip';
        chip.textContent = n;
        modalWinNums.appendChild(chip);
    });
    modalBackdrop.style.display = 'block';
    winModal.style.display = 'flex';
}

rollButton.addEventListener('click', () => {
    if (isRolling) return;
    if (selected.length !== 6) {
        alert('번호 6개를 먼저 선택해주세요.');
        secPick.scrollIntoView({ behavior: 'smooth' });
        return;
    }

    isRolling = true;
    msg.textContent = '추첨 중…';
    summaryText.textContent = '추첨 중입니다. 잠시만 기다려주세요.';

    const intervals = [];
    const results = new Array(6).fill(0);

    balls.forEach((ball, idx) => {
        ball.classList.add('roll');
        const interval = setInterval(() => {
            const n = Math.floor(Math.random() * MAX_NUM) + 1;
            results[idx] = n;
            ball.textContent = n;
        }, 70 + idx * 20);
        intervals.push(interval);
    });

    const win = random6();
    const sortedMy = [...selected].sort((a,b)=>a-b);

    [0,1,2,3,4,5].forEach(idx => {
        setTimeout(() => {
            clearInterval(intervals[idx]);
            balls[idx].classList.remove('roll');
            balls[idx].textContent = win[idx];

            if (idx === 5) {
                isRolling = false;
                // 비교
                const match = sortedMy.filter(n => win.includes(n)).sort((a,b)=>a-b);
                const count = match.length;

                msg.textContent = count === 0
                    ? '아쉽지만 이번에는 일치하는 번호가 없습니다.'
                    : `총 ${count}개 번호가 일치했습니다.`;

                summaryText.textContent =
                    `내 번호 ${sortedMy.join(', ')} / 추첨 번호 ${win.join(', ')} / 일치 개수 ${count}개`;

                // 추첨 번호 렌더
                winNumsBox.innerHTML = '';
                win.forEach(n => {
                    const pill = document.createElement('span');
                    pill.className = 'pill win';
                    pill.textContent = n;
                    winNumsBox.appendChild(pill);
                });

                // 일치 번호 렌더
                matchNumsBox.innerHTML = '';
                if (!match.length) {
                    const span = document.createElement('span');
                    span.textContent = '없음';
                    span.style.fontSize = '12px';
                    span.style.color = '#888';
                    matchNumsBox.appendChild(span);
                } else {
                    match.forEach(n => {
                        const pill = document.createElement('span');
                        pill.className = 'pill match';
                        pill.textContent = n;
                        matchNumsBox.appendChild(pill);
                    });
                }

                // 내 번호 영역은 이미 selection 렌더에서 업데이트됨

                // 많이 맞으면 모달로 강조 (예: 3개 이상)
                if (count >= 3) {
                    showWinModal(count, win);
                }
            }
        }, (idx + 1) * 500);
    });
});

// 모달 배경 클릭 시 닫기
modalBackdrop.addEventListener('click', hideWinModal);
</script>

</body>
</html>
